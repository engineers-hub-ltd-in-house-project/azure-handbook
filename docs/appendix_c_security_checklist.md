# 付録C: セキュリティ/コンプラ要件チェックリスト

このチェックリストは、Azureで新しい環境を構築する際に考慮すべき、基本的なセキュリティ項目をまとめたものです。網羅的な監査リストではありませんが、設計・構築の初期段階で見落としがちなポイントを確認するための「最初の防衛ライン」として活用してください。

## 1. IDとアクセス管理 (Identity & Access Management)

- [ ] **多要素認証 (MFA) の強制**: 管理者アカウントを含むすべてのユーザーに対してMFAが有効化されているか。
- [ ] **最小権限の原則 (PoLP)**: 各ユーザーやサービスプリンシパルには、業務に必要な最小限のロールのみが割り当てられているか。（例: `Reader` で十分なユーザーに `Contributor` を割り当てていないか）
- [ ] **マネージドIDの利用**: VMやApp ServiceなどのAzureリソースが他のAzureサービス（Key Vaultなど）にアクセスする際、パスワードではなくマネージドIDを利用しているか。
- [ ] **特権ロールの利用制限**: `Owner` や `User Access Administrator` などの強力なロールの割り当ては、必要最小限のユーザーに限定されているか。
- [ ] **定期的なアクセスレビュー**: 特権ロールを持つユーザーの棚卸しを定期的に実施する計画があるか。

## 2. ネットワーク (Networking)

- [ ] **不要なパブリックIPの排除**: 仮想マシンなどに、不要なパブリックIPアドレスが割り当てられていないか。
- [ ] **NSGによるトラフィック制限**: すべてのサブネットとNICにNSGが適用され、許可するポートとIPアドレスが最小限に絞られているか。
- [ ] **PaaSサービスのプライベート接続**: ストレージアカウント、データベース、Key VaultなどのPaaSサービスには、可能な限りPrivate Endpointを利用し、パブリックアクセスが無効化されているか。
- [ ] **ハブ＆スポークモデルの検討**: 複数のVNetが存在する場合、Azure Firewallを配置したハブVNet経由でトラフィックを集中管理する構成になっているか。
- [ ] **DDoS Protectionの有効化**: インターネットに公開される重要なサービスのエンドポイントに対して、Azure DDoS Protection Standardが有効化されているか。

## 3. データ保護 (Data Protection)

- [ ] **保存データの暗号化**: Azure Storageや各種データベースで、保存データの暗号化が有効になっているか。（多くはデフォルトで有効）
- [ ] **転送中データの暗号化**: アプリケーションとAzureサービス間の通信、およびユーザーとアプリケーション間の通信がTLS/SSLで暗号化されているか。（例: ストレージアカウントの「安全な転送が必須」設定）
- [ ] **Key Vaultによるシークレット管理**: パスワード、接続文字列、APIキーなどが、ソースコードや構成ファイルにハードコーディングされず、Key Vaultで管理されているか。
- [ ] **バックアップの有効化とテスト**: 重要なデータ（VM、データベース）に対してバックアップが有効化されており、定期的にリストアテストが実施されているか。

## 4. 監視とログ (Monitoring & Logging)

- [ ] **診断設定の有効化**: すべての重要なリソースで診断設定が有効化され、ログとメトリックが中央のLog Analyticsワークスペースに送信されているか。
- [ ] **Microsoft Defender for Cloudの活用**: Defender for Cloudの推奨事項を定期的に確認し、セキュリティスコアを改善する活動が行われているか。
- [ ] **アラートの設定**: CPU使用率、メモリ使用率、サーバーエラー、セキュリティイベント（不審なサインインなど）に対するアラートルールが設定されているか。
- [ ] **アクティビティログの監視**: サブスクリプションレベルでの重要な変更（ロールの割り当て、ポリシーの変更など）を監視し、アラートが設定されているか。
